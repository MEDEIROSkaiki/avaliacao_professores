{% extends 'base.html' %}
{% load static %}

{% block content %}

<main class="admin-container">

    <section class="admin-panel">
        <h1>Adicionar Novo Usuário</h1>

        <form action="" method="POST" enctype="multipart/form-data"> 
            {% csrf_token %}
            
            <div class="form-group">
                <select id="tipo_usuario" name="tipo_usuario">
                    <option value="" disabled selected>Selecione o Tipo de Usuário</option>
                    <option value="aluno">Aluno</option>
                    <option value="professor">Professor</option>
                    <option value="administrador">Administrador</option>
                </select>
            </div>
            
            <div class="form-group" id="campo_disciplina" style="display: none;">
                <select id="materia_disciplina" name="materia_disciplina">
                    <option value="" disabled selected>Selecione a Disciplina</option>
                    {% for materia in materias %}
                        <option value="{{ materia.id }}">{{ materia.nome }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <input type="text" id="nome" name="nome" placeholder="Nome Completo">
            </div>
            
            <div class="form-group">
                <input type="email" id="email" name="email" placeholder="Email (login)">
            </div>
            
            <div class="form-group">
                <input type="text" id="cpf" name="cpf" placeholder="CPF (só números)">
            </div>
            
            <div class="form-group">
                <input type="text" id="nascimento" name="nascimento" placeholder="Data de Nascimento (DD/MM/AAAA)">
            </div>

            <div class="form-group">
                <label for="imagem_perfil" style="display: block; margin-bottom: 5px; font-weight: 500; color: var(--azul-marinho);">
                    Foto de Perfil (Opcional)
                </label>
                <input type="file" id="imagem_perfil" name="imagem_perfil" accept="image/*" style="
                    padding: 10px 0; 
                    background-color: transparent; 
                    border: none;
                    width: 100%;
                    box-sizing: border-box; 
                    color: var(--verde-escuro-letras);">
            </div>
            
            <div class="form-buttons">
                <button type="submit" class="btn">Cadastrar Usuário</button>
            </div>
        </form>
    </section>

</main>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Pega os dois elementos que vamos usar
        const tipoUsuarioSelect = document.getElementById('tipo_usuario');
        const campoDisciplinaDiv = document.getElementById('campo_disciplina');

        // Adiciona um "ouvinte" de mudança no select 'tipo_usuario'
        tipoUsuarioSelect.addEventListener('change', function() {
            // Se o valor selecionado for 'professor'...
            if (this.value === 'professor') {
                // Mostra o campo de disciplina
                campoDisciplinaDiv.style.display = 'block';
            } else {
                // Se for qualquer outro valor, esconde
                campoDisciplinaDiv.style.display = 'none';
            }
        });
    });
</script>

{% endblock content %}